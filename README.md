# PHP CLI

Библиотека, обеспечивает инициализацию приложения из CLI-интерфейса и обработку входящих аргументов запуска в соответствии со следующим соглашением:
- аргументы запуска передаются в фигурных скобках через запятую в следующем формате:
    - одиночный аргумент: {arg}
    - несколько аргументов: {arg1,arg2,arg3} ИЛИ {arg1} {arg2} {arg3} ИЛИ {arg1,arg2} {arg3}
- параметры запуска передаются в квадратных скобках в следующем формате:
    - параметр с одним значением: [name=value]
    - параметр с несколькими значениями: [name={value1,value2,value3}]
    
Функциональность библиотеки включает в себя:
- инициализацию CLI-приложения;
- регистрацию необходимых команд в приложении;
- установку названия и описания команды, её параметров и аргументов;
- обработку входящих параметров;
- выполнение заданной логики с возможностью вывода информации в консоль.

При запуске приложения без указания конкретной команды выводится список всех зарегистрированных в нём команд и их описания.

При запуске любой из команд с аргументом {help} выводится описание команды и список допустимых входящих аргументов и параметров.

## Структура
    - example
        - CommandExample.php    Класс с реализацией команд (пример)
        - conf_commands.php     Настройка доступных команд (пример)
    - src
        - ConsoleApp.php        Класс консольного приложения
        - ConsoleArgs.php       Класс, обрабатывающий входные параметры (команда, аргументы, опции)
        - ConsolePrint.php      Класс для вывода в консоль
    - app.php                   Точка входа
    - composer.json             Файл для Composer
    - README.md                 Описание проекта


## Установка
Рекомендуемая версия PHP: 7.4

    composer install

## Настройка
# conf_commands.php
Файл настроек команд.
Содержит массив доступных команд.
Каждый элемент имеет структуру:

    'название_команды' => [
        'class_name' => класс, реализующий логику команды,
        'method' => метод класса для запуска,
        'desc' => Описание команды, отображаемое если передать аргумент {help},
        'arguments' => [
            ...
            допустимые аргументы команды
            ...
        ],
        'options' => [
            ...
            допустимые опции команды
            ...
        ],
    ],

## Пример запуска команды
    $/usr/bin/php app.php command_name {verbose,overwrite} [log_file=app.log] {unlimited} [methods={create,update,delete}] [paginate=50] {log}
    
    Called command: command_name
    Arguments:
       -  verbose
       -  overwrite
       -  unlimited
       -  log
    Options:
       -  log_file
             -  app.log
       -  methods
             -  create
             -  update
             -  delete
       -  paginate
             -  50
